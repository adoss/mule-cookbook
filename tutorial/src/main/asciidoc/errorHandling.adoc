:resourcesDir: resources

== Improving Error Handling

This section explains how to improve exception handling and reconnecting.

=== Exception Handling with @Handler

The http://www.mulesoft.org/documentation/display/current/Annotation+Reference#AnnotationReference-handleran[@Handler] feature, is very useful when you want to avoid duplicated code when handling exceptions, and also so that your connector code is clean.

When handling messages retrieved from the API, if the message is poor and you know how to improve it, you can us this mechanism, to enrich the error provided to the user.

After defining your handler, you can use them either by annotating your class or your processor.

Our @Handler Class could be:

[source,java]
----
include::{resourcesDir}/java/v3/CookBookHandler.java[]
----

To use it in one processor.
[source,java,indent=0]
----
include::{resourcesDir}/java/v3/CookBookConnector.java[lines=66..70]
----
Check the full link:{resourcesDir}/java/v3/CookBookConnector.java[source code].

=== Handling Session Expiration

There is no need for users to add custom code in their Mule apps to handle session expiration. DevKit provides a mechanism to do this in a clean way.

Just annotate your @Processor method with the @ReconnectOn exception.

[source,java,indent=0]
----
include::{resourcesDir}/java/v3/CookBookConnector.java[lines=84..88]
----

In our Mule app, you can configure a reconnection strategy so that our Mule app is ready to  handle session expirations.

Global Config dialog configuration:

image::reconnect.png[width="500"]

The XML generated looks like:
[source,xml]
----
<cook-book:config-type doc:name="config" name="config" password="admin" username="admin">
    <reconnect/>
</cook-book:config-type>
----
